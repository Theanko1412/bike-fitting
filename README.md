# Bike Fitting Application

A comprehensive bike fitting application that provides an interactive form with images, PDF report generation, and retrieval of past fittings. Built with a shadcn-ui React frontend and Spring Boot backend.

## üö¥‚Äç‚ôÇÔ∏è Features

- **Interactive Bike Fitting Form**: Step-by-step form with visual guides and measurements
- **Image Integration**: Visual references and diagrams to assist with fitting process
- **PDF Report Generation**: Automated generation of professional bike fitting reports
- **Past Fitting Retrieval**: Search and view historical fitting records
- **Authentication**: Secure login system with JWT tokens

## üèóÔ∏è Architecture

- **Frontend**: React + TypeScript with Vite, TanStack Router, and Tailwind CSS + shadcn-ui
- **Backend**: Spring Boot with Kotlin, PostgreSQL database
- **Database**: PostgreSQL running in Docker container
- **Authentication**: JWT-based authentication with role-based access

## üöÄ Getting Started

### Prerequisites

- Node.js 18+ and npm
- Java 21+
- Docker and Docker Compose
- Git

### Backend Setup

1. **Start the Database**
   ```bash
   cd be/bikefitting-be/support/docker/bikefitting
   docker-compose up -d
   ```
   This will start a PostgreSQL database on port `5433` with:
   - Database: `bikefitting`
   - Username: `bikefitting` 
   - Password: `bikefitting`

2. **Run the Backend**
   ```bash
   cd be/bikefitting-be
   ./gradlew bootRun
   ```
   The backend will start on `http://localhost:8080`

### Frontend Setup

1. **Install Dependencies**
   ```bash
   cd fe/bikefitting-fe
   npm install
   ```

2. **Set Environment Variables**
   Create a `.env` file in the `fe/bikefitting-fe` directory:
   ```env
   VITE_FITTERS='[{"id": "fitter1", "name": "Your Fitter Name", "email": "fitter@example.com"}]'
   ```

3. **Start the Frontend**
   ```bash
   npm run dev
   ```
   The frontend will start on `http://localhost:3000`

## ‚öôÔ∏è Environment Variables

### Frontend (VITE_FITTERS)

The `VITE_FITTERS` environment variable configures the available bike fitters in the application. It should be a JSON array of fitter objects:

```json
[
  {
    "id": "fitter1",
    "name": "John Doe",
    "email": "john.doe@example.com"
  },
  {
    "id": "fitter2", 
    "name": "Jane Smith",
    "email": "jane.smith@example.com"
  }
]
```

**Required fields:**
- `id`: Unique identifier for the fitter (generated by backend - nanoid (10))
- `name`: Display name of the fitter
- `email`: Contact email address


### Backend Configuration

Backend configuration is managed through `application.yaml`. Key settings include:

- **Database**: PostgreSQL connection (localhost:5433)
- **JWT**: Authentication token configuration
- **CORS**: Cross-origin settings for frontend communication
- **File Upload**: Maximum file size limits for images

## üîë Authentication

The application includes built-in user accounts:

- **Admin**: `admin` / `adminpassword`
- **User**: `user` / `userpassword`

## üìñ API Documentation

The backend exposes REST APIs for:
- Authentication (`/api/auth/*`)
- Bike fitting records (`/api/bikefitting/*`)
- PDF generation and download

Health check endpoint: `http://localhost:8080/actuator/health`